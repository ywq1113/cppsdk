# ============================
# Google C++ Style Base
# Modern C++ 17/20 Optimized
# ============================

BasedOnStyle: Google
Language: Cpp
Standard: c++20

# ---- 缩进与空格 ----
IndentWidth: 2
TabWidth: 4
UseTab: Never
ContinuationIndentWidth: 4
IndentCaseLabels: false            # Google: case 与 switch 对齐

# ---- 换行规则 ----
ColumnLimit: 80                   # Google 推荐 80
AllowShortFunctionsOnASingleLine: Empty
AllowShortIfStatementsOnASingleLine: true
AllowShortLoopsOnASingleLine: true
BinPackArguments: true            # Google：参数尽可能放一行
BinPackParameters: true

# ---- 括号规则 ----
BreakBeforeBraces: Attach
BraceWrapping:
  AfterFunction: false
  AfterClass: false
  AfterControlStatement: false
  BeforeElse: false

# ---- 注释 ----
ReflowComments: true
SpacesBeforeTrailingComments: 1

# ---- 空行规则 ----
KeepEmptyLinesAtTheStartOfBlocks: false
MaxEmptyLinesToKeep: 1

# ---- include 规则 ----
SortIncludes: true
IncludeBlocks: Regroup
IncludeCategories:
  - Regex: '^"(.*)"'
    Priority: 1
  - Regex: '^<c.*>'
    Priority: 2
  - Regex: '^<.*>'
    Priority: 3
  - Regex: '.*'
    Priority: 4

# ---- 指针和引用对齐方式 ----
PointerAlignment: Right           # Google: int *ptr;

# ---- 命名空间 ----
NamespaceIndentation: Inner       # Google: 命名空间内容缩进

# ---- 构造函数初始化列表 ----
ConstructorInitializerAllOnOneLineOrOnePerLine: false
BreakConstructorInitializersBeforeComma: false

# ---- 模板代码 ----
SpacesInAngles: false
SpaceBeforeCpp11BracedList: false
Cpp11BracedListStyle: true

# ---- 其他对齐规则 ----
AlignAfterOpenBracket: Align
AlignOperands: true
DerivePointerAlignment: false
AllowAllParametersOfDeclarationOnNextLine: false
